<!DOCTYPE html>
<html>
<head>
  <title>QR Attendance</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
  <h2>QR Attendance System</h2>
  <div id="reader" style="width:300px;"></div>
  <div id="result"></div>

  <script>
    function onScanSuccess(decodedText) {
      fetch("/attendance", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({qrData: decodedText})
      }).then(res => res.json()).then(data => {
        document.getElementById("result").innerHTML =
          "<p>âœ” Attendance marked for <b>" + data.student + "</b> (" + data.session + ")</p>";
      });
    }

    new Html5QrcodeScanner("reader", { fps: 10, qrbox: 250 })
      .render(onScanSuccess);
  </script>
</body>
</html>
